# <%= projectName %>

Express API starter generated by `@alexmc2/create-express-api-starter`.

## Selected options

- Language: <%= languageLabel %>
- Architecture: <%= architectureLabel %>
- Database: <%= databaseLabel %>
- Educational comments: <%= educationalLabel %>

## Folder structure

```
.
├── src
│   ├── app.js
│   ├── server.js
│   ├── routes
│   │   ├── health.js
│   │   └── users.js
│   ├── controllers
│   │   └── usersController.js
│   ├── services
│   │   └── usersService.js
│   ├── repositories
│   │   └── usersRepository.js
<% if (isPostgres) { %>│   ├── db
│   │   └── pool.js
<% } %>│   └── middleware
│       ├── errorHandler.js
│       └── notFound.js
├── __tests__
│   └── app.test.js
<% if (isPostgres) { %>├── db
│   ├── schema.sql
│   └── seed.sql
<% } %><% if (isDocker) { %>├── scripts
│   ├── dbSetup.js
│   ├── dbSeed.js
│   └── dbReset.js
├── compose.yaml
<% } %>├── .env.example
├── .gitignore
├── package.json
└── jest.config.js
```

## Run the app

1. `npm install`
2. Copy `.env.example` to `.env`
<% if (isPsql) { %>3. Make sure Postgres is running and `DATABASE_URL` is valid.
4. `npm run db:setup`
5. `npm run db:seed`
6. `npm run dev`
<% } else if (isDocker) { %>3. `npm run db:up`
4. `npm run db:setup`
5. `npm run db:seed`
6. `npm run dev`
<% } else { %>3. `npm run dev`
<% } %>

## Add a new route

1. Create a router file in `src/routes`.
2. Add a controller function in `src/controllers`.
3. Add business logic in `src/services`.
4. Register the route in `src/app.js`.

## Where business logic goes

Put business rules in `src/services`. Controllers focus on HTTP concerns, and repositories only handle data access.

## How errors work

- `src/middleware/notFound.js` handles unknown routes with a 404 JSON response.
- `src/middleware/errorHandler.js` returns `{ status, message }` and includes `stack` only in development.

<% if (isPsql) { %>## Database mode: Postgres (psql)

Prerequisites:

- PostgreSQL installed locally
- `psql` available on your `PATH`

Useful commands:

- `npm run db:setup`
- `npm run db:seed`
- `npm run db:reset`
<% } %>
<% if (isDocker) { %>## Database mode: Postgres (Docker)

Docker workflow:

1. `docker compose up -d` (or `npm run db:up`)
2. `npm run db:setup`
3. `npm run db:seed`
4. `npm run dev`

When finished:

- `npm run db:down`
<% } %>
